{% extends "base.html" %}
{% load match_extras %}
{% load static %}
{% block title %}{{ object.nickname }} - Overview - Honstats {% endblock %}
{% block content %}
    <nav class="nav">
        <a class="nav-item nav-link account-link" href="#">Overview</a>
        <a class="nav-item nav-link account-link" href="{% url 'match-list' %}?account_id={{ object.account_id }}">Matches</a>
        <a class="nav-item nav-link disabled" href="#">Heroes</a>
    </nav>
    <div class="match-info card card-body bg-dark text-light">
        <h1><span class="hellbourne">{{ object.nickname }}</span></h1>
        <table>
            <tr>
                <td>Account ID: <span class="span-networth">{{ object.account_id }}</span></td>
            </tr>
            <tr>
                <td>Season Games Played: <span class="span-networth">{{ object.games_played }}</span></td>
            </tr>
            <tr>
                <td>Total Games Played: <span class="span-networth">{{ object.total_games_played }}</span></td>
            </tr>
            <tr>
                <td>Last Activity: <span class="span-networth">{{ object.last_activity|date:'F d, Y' }}</span></td>
            </tr>
            <tr>
                <td>Updated: <span class="span-networth">{{ object.fetched_date }}</span></td>
            </tr>
        </table>
    </div>
    <table class="table table-striped table-dark">
        <thead>
        <tr>
            <th scope="col">Hero</th>
            <th scope="col">Stats</th>
            <th scope="col">Result</th>
            <th scope="col">Avg MMR</th>
            <th scope="col">Match ID</th>
            <th scope="col">Date</th>
        </tr>
        </thead>
        <tbody>
        {% for player in matches %}
            <tr>
                <td><img src="{% static player.hero_id|hero_icon %}" class="item-icon"
                         title="{{ player.hero.name }}" alt="{{ player.hero.name }}"/> {{ player.hero.name }}</td>
                <td><span class="span-kills">{{ player.hero_kills }}</span> /
                    <span class="span-deaths">{{ player.deaths }}</span> /
                    <span class="span-assists">{{ player.hero_assists }}</span>
                </td>
                <td>
                    {% if player.is_winner %}<span class="legion">Win</span>
                    {% else %}
                        <span class="hellbourne">Loss</span>
                    {% endif %}
                    {% if player.mmr_diff and player.mmr_diff > 0 %}
                        <span class="legion">(+{{ player.mmr_diff }})</span>
                    {% elif player.mmr_diff and player.mmr_diff < 0 %}
                        <span class="hellbourne">({{ player.mmr_diff }})</span>
                    {% endif %}
                </td>
                <td>{{ player.match.average_mmr|default_if_none:"-" }}</td>
                <td><a class="account-link" href="{% url 'match-detail' pk=player.match_id %}">{{ player.match_id }}</a>
                </td>
                <td>{{ player.match.match_date }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

{% endblock %}
